<!DOCTYPE html>
<html>
<head>

<meta name="viewport" content="width=640, initial-scale=0.5, minimum-scale=0.5, maximum-scale=0.5, user-scalable=yes">
<meta charset="utf-8">
<!--<link href="animate_css/css/animate.css" rel="stylesheet" type="text/css"/>
<link href="css/mobile.min.css" rel="stylesheet" type="text/css"/>-->
<link href="css/base.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="lib/jquery-2.1.3.min.js"></script>
<!--用于保存数据-->
<script>var me_logo_ok = false;
var fmawr = "999";</script>
<script src="lib/fmacapi.interface.min.js"></script>
<script type="text/javascript" src="lib/require.js"></script>
<script type="text/javascript" src="lib/renderjs.js"></script>
<!--<script type="text/javascript" src="lib/log4javascript.js"></script>-->
<!--<script src="cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react.js"></script>
<script src="cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-dom.js"></script>-->

<!--<script src="3rd/hammer.js"></script>
<script src="components/core/MePage.js"></script>-->
<style>

    .me-gallary .img-collection {
        transition-property: transform;
        transition-duration: 0.5s;
    }

    .me-gallary .inds .indicator {
        width: 15px;
        height: 15px;
        box-sizing: border-box;
        margin-left: 15px;
        border-radius: 100%;
        background: rgba(255, 255, 255, .5);
        border: 1px solid rgba(0, 0, 0, .5);
        list-style: none;
        display: inline-block;
    }

    .me-gallary .inds {
        width: 100%;
        position: absolute;
        text-align: center;
        height: 15px;
        line-height: 15px;
        z-index: 6;
        bottom: 45px;
    }

    .audioWrapper {
        background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAgCAMAAADOixOHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABGlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8AAACz+Fa2AAAAXHRSTlMAhHeK/mmR+jxx5RSHnwO2OwYW674Hs6QBXjkKuHUC05z4JVryCEb8qO1CgP0dg+R0X359MdlKEfDJDn/P+1ISeD3d2qlkF2Kmha4QDESBCekNBNxNbMXAP5ahFZTSyTUAAAABYktHRACIBR1IAAAACXBIWXMAAAsSAAALEgHS3X78AAABLklEQVQoz22S11bDMBAFBYgaIISShBaaTTMh9G7A9FBC7/v/38G9CvKxj6wHa3ZWWq8lK5UeLa0qa7SJbs/QHSLS2eX6bnjpybmJXib6XN+fh9cDSVUo8Dk4hMRwQo8US2XOo6w0FuvxCZFJQmUKfjr2rDszS5oDeb718wsIF0n+Emg53hAgWqmSSqDV2Ps1hGukdUAR80bzqDYR5glbgG1o0Ts2rBF2AXtm2T7DAzZudvKT1SGeRyYMQeyvYjwS+pg6hzAknJg6SJya5RHCM/ui8/SdXBAu//tsjisP4TXpBlC3unzLY7kD3XPBg/UNdtmwZbzH5PE8PQNeXtM3GYh+4/zOjVHiwgLTbpXVP9x7/+THfjn+m1V+HF03/9Wv49lVGCmVlcj6b21XSv0Br5lN9OvlDGIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTYtMDEtMjBUMTQ6NDE6NTcrMDg6MDBBCJ6JAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE2LTAxLTIwVDE0OjQxOjU3KzA4OjAwMFUmNQAAAABJRU5ErkJggg==");
        background-repeat: no-repeat;
        background-position: center;
        perspective: 1000px;
        background-color: rgba(0, 0, 0, .5);
        backface-visibility: hidden;
        position: relative;
        border: none;
        border-radius: 100%;
        box-sizing: border-box;
        animation-duration: 0.1s;
        animation-iteration-count: 1;
        animation-delay: 0.3s;
        width: 62px;
        height: 62px;
    }

    .pausedAudio {
        background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaAgMAAADK7ZTuAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACVBMVEUAAAD///8AAABzxoNxAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAARSURBVAjXYwhlYGAIZRiUJABDnxFF8v/L5gAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNi0wMS0yMFQxNDo0MTo0NCswODowMLxKhIoAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTYtMDEtMjBUMTQ6NDE6NDQrMDg6MDDNFzw2AAAAAElFTkSuQmCC") !important;
    }

    .audioWrapper .audioBack.playing {
        width: 72px;
        height: 72px;
        position: absolute;
        top: calc(50% - 36px);
        left: calc(50% - 36px);
        z-index: 1;
        margin: 0px auto;
        -webkit-animation-name: player-button;
        -webkit-animation-duration: 2.6s;
        -webkit-animation-iteration-count: infinite;
        -webkit-animation-timing-function: linear;
        border-radius: 100%;
        display: block;
        background: rgba(31, 29, 27, 0.4);
    }

    .page_container {
        position: absolute;
    }

    .page_container {
        transition-property: transform;
        transition-duration: 0.5s;
        z-index: 100;
    }

    #buffer-container {
        transition-property: transform;
        transition-duration: 0.5s;
    }

    body {
        overflow: hidden;
    }

    .hidden {
        display: none
    }

    .me-page {
        background-repeat: no-repeat;
        -moz-background-size: 100% 100%;
        background-size: cover;
        overflow: hidden
    }

    .me-toolbar {
        float: right;
    }

    .page_container.up {
        transform: translate(0px, -1192px);
        z-index: 0;
    }

    .page_container.down {
        transform: translate(0px, 1192px);
        z-index: 0;
    }

    .page_container.left {
        transform: translate(-720px, 0px);
        z-index: 0;
    }

    .page_container.right {
        transform: translate(720px, 0px);
        z-index: 0;
    }

    .page_container.middle {
        transform: translate(0px, 0px);
    }

    .page_container.none {
        display: none
    }

    /**
    *以下为后加的样式
    */
    .popupIframe {
        position: absolute;
        display: none;
        z-index: 100000;
        left: 0px;
        top: 0px;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.65098);
    }

    .closeBtn {
        position: absolute;
        left: 0px;
        top: 0px;
        width: 126px;
        height: 126px;
        z-index: 2;
        background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAA6CAMAAADWZboaAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAV1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC7u7uRkZHs7OycnJwAAADxN0xuAAAAHHRSTlMABidFWm9+hIoKOmqHG1sXYUoYdTOGQ0zQvPDAdFT41AAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAFLSURBVEjHpZfZmoMgDIXB9VSpdevq+7/nWNvOFCcsenInX34hIYGDUpLpJM3yogTKIs/SRKtIO1S1gWWmrg4R4LFZcW+6OQbAUwuntScPqDsDj5nOGXQ/IGBDL5PjOUQC51EiL2HwaZf/5DWOBK475xTmHeNJwIq3j8jQV66+8qyDu2Lb8Le/3TYS6H6rz2xFzacm263kXM/vXrEGb3fZ+X6zPl991Nguj0kip4f9y2bpbLN2miRyNWievV8F3cShakbr8BTSQuq5HISdWbmKIRitEjkpU4AEEpUiwDpIpCqDn3WRyFQOL+skkasCPtZNolAlPKyHRKkAD+shAQYlFkykidgcoiSIQiTKn2g6otWZA4Y41ojDlDnCiYuDua6IS5K5mglBwMgQRvwwkosReoy8ZEQtI6UVIeCXPtr7bFgkzd7HyivomCfSDxqOYr3jUPvqAAAAAElFTkSuQmCC') center no-repeat;
    }

    .iframeWrapper {
        width: 100%;
        -webkit-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
        position: relative;
        top: 50%;
        left: 50%;
        text-align: center;
    }

    .video-player-btn {
        position: absolute;
        z-index: 2;
        width: 88px;
        height: 88px;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        transform: -webkit-translate(-50%, -50%);
        background: url("data:image/png;base64,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") center no-repeat;
        background-size: cover;
    }

    .video-player-end {
        position: absolute;
        z-index: 3;
        display: inline-block;
        padding: 0px 20px;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        height: 70px;
        font-size: 30px;
        text-align: center;
        border-radius: 20px;
        line-height: 70px;
        color: rgb(255, 255, 255);
        letter-spacing: 5px;
        background: rgb(27, 27, 27);
    }
</style>
<script type="text/javascript">
    //var log = log4javascript.getLogger("main");
</script>
</head>
<body>
<div id="pageContent">
    <div id="magazine" class="ui_view_transitioning ui_page">
        <div id="magazine-container" style='height:100%;width:100%'>
        </div>
        <div id="852"></div>
    </div>
    <div id="popup-iframe" class="popupIframe">
        <div class="closeBtn"></div>
    </div>
    <!---目录-->
    <div id="magazine-view-ports" class="screen-button-active">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAcCAYAAACZOmSXAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAAAMUlEQVRIx+3VoQEAIADDsJX/fx4GPgAMjZyZLG2bJABZ9nbbeHEiSXoKwyJJOunfsEybpRf+wc8dBgAAAABJRU5ErkJggg==">
    </div>
    <div id="magazine-switch-play">
        <div class="switch-play play-magazine" id="switch-play"></div>
    </div>
</div>

</body>
<script type="text/javascript">
var fmawr = "999";      //测试正式服或者测试服
var defaultInterval = 10000;   //默认初始的时间为10s
var magazineInterval = 0;   //默认初始的时间为10s
var playTimer = null;       //自动播放的控制timer
var magazinePlaying = false;
var allPageLengths = 0;     //所有页数
var groupLength = 0;        //组长度
var _animationMode = {
    "name": "scrollY",
    "autoplay": false,
    "interval": defaultInterval,
    "direction": 1,
    "lock": false
};
var animationMode = null;

$(function () {
    $('#pageContent').bind('mousewheel', function (e) {
        if (e.originalEvent.wheelDelta / 120 > 0) {
            renderjs.helper.gotoPrev();
        }
        else {
            renderjs.helper.gotoNext();
        }
    });
    $("#magazine-switch-play").click(changeMagazine);
    $("#magazine-view-ports").click(showDirectory);
    var article_file = "mag_lf.js"
    var _xparam = /article=([^&]+)/.exec(location.href);
    var magUrl = 'dist/mag_1.js';
    renderjs.helper.init(document.getElementById("magazine-container"), {});
    if (_xparam != null) {
        if (_xparam[1].search(/http/) != -1) {
            magUrl = 'jsx?mag=' + escape(_xparam[1]);
        } else {
            magUrl = 'dist/' + _xparam[1];
        }
    } else {
        _xparam = /tid=([^&]+)/.exec(location.href);
        if (_xparam != null) {
            //服务端加载
            globalLoadTid(_xparam[1], function (mag) {
                if (mag != undefined && renderjs != undefined) {
                    //如需要添加尾页的先追加尾页，再去load数据
                    appendPage(mag);
                    renderjs.helper.load(mag);
                    //接口必须在load之后才调用
                    //获取当前页的当前组的序号renderjs.helper.getPos()
                    //获取当前组的总页数renderjs.helper.getCurrentGroupPageLength()
                    //获取组长度renderjs.helper.getGroupLength()
                    groupLength = renderjs.helper.getGroupLength();
                    //获取总页数renderjs.helper.getAllPageLengths()
                    //获取每一页的动画信息
                    animationMode = renderjs.helper.getAnimationMode();
                    //解析动画参数
                    _parseData(animationMode);
                    //获取当前的上下文
                    var ee = renderjs.helper.getEE();
                    //页滑动结束事件
                    ee.addListener("slide:page:end", onSlidePageEndHandler);
                    //组滑动结束事件
                    ee.addListener("slide:group:end", onSlideGroupEndHandler);
                    //所有页滑动结束事件
                    ee.addListener("slide:end", onSlideEndHandler);
                    //todo 根据数据来设置自动播放
                    setTimeout(function () {
                        if (magazinePlaying) {
                            playMagazine();
                        }
                    }, 10);
                }
            });
            return;
        }
    }
    require([magUrl], function (mag_1) {
        console.log(mag_1);
        if (mag_1 != undefined && renderjs != undefined) {
            //如需要添加尾页的先追加尾页，再去load数据
            appendPage(mag_1);
            renderjs.helper.load(mag_1);
            //接口必须在load之后才调用
            //获取当前页的当前组的序号renderjs.helper.getPos()
            //获取当前组的总页数renderjs.helper.getCurrentGroupPageLength()
            //获取组长度renderjs.helper.getGroupLength()
            groupLength = renderjs.helper.getGroupLength();
            //获取总页数renderjs.helper.getAllPageLengths()
            //获取每一页的动画信息
            animationMode = renderjs.helper.getAnimationMode();
            _parseData(animationMode);
            //获取当前的上下文
            var ee = renderjs.helper.getEE();
            //页滑动结束事件
            ee.addListener("slide:page:end", onSlidePageEndHandler);
            //组滑动结束事件
            ee.addListener("slide:group:end", onSlideGroupEndHandler);
            //所有页滑动结束事件
            ee.addListener("slide:end", onSlideEndHandler);
            //todo 根据数据来设置自动播放
            setTimeout(function () {
                if (magazinePlaying) {
                    playMagazine();
                }
            }, 10);
        }
    });
});
/**
 * 上下翻页结束事件
 * @param data 返回的数据 如 object{groupIndex: 0, pageIndex: 2, pageLength: 6}
 */
function onSlidePageEndHandler(data) {
//        console.log(data, "-----page--------");
}
function onSlideGroupEndHandler(data) {
//        console.log(data, "-----group--------");

}
function onSlideEndHandler(data) {
//        console.log(data, "-----slide end--------");
    var groupIndex = data.groupIndex;
    var pageIndex = data.pageIndex;
    var pageLength = data.pageLength;
    //最后一组最后一页
    if (groupIndex == (groupLength - 1) && pageIndex == (pageLength - 1)) {
        console.log("page-end");
        //如果自动播放了，停止自动播放
        if (magazinePlaying) {
            pauseMagazine();
        }
    }
}
/**
 * 解析动画参数
 */
function _parseData(animationMode) {
    //重置一些设置
    if (animationMode.tplMode) {
        var animationMode = JSON.parse(animationMode.tplMode);
        for (var i in animationMode) {
            _animationMode[i] = animationMode[i];
        }
    }
}
function appendPage(mag) {
    //由于mag是个对象，所有不需要返回值，这就好比传的是指针
    var len = mag.pages.length;
    //创建react对象
    //todo 需要动态替换data ----用户头像地址，用户名称，用户id
    var endPageObj = renderjs.React.createElement(renderjs.MePage, {idx: len, cxt: mag.cxt, normalStyle: {height: "1008px", width: "640px"}},
            renderjs.React.createElement(renderjs.MeEndPage, {data: {src: "http://ac-syrskc2g.clouddn.com/e4c01aabc7936b223d87.jpg?imageView/2/w/300/h/300/q/100/format/png", name: "fish", author: "5639b08c60b2c82f3e16c3de"}}));
    mag.pages.push(endPageObj);
    //修改layout
    var layoutLen = mag.layout.length;
    //获取倒数第二组的内容，由于倒数第一组为-1
    var endArr = mag.layout[layoutLen - 2];
    endArr.splice(endArr.length - 1, 0, len);
}

function changeMagazine(e) {
    if (!magazinePlaying) {
        playMagazine();
    } else {
        pauseMagazine();
    }
}
function playMagazine() {
    //todo 根据每一页的设置播放时间来改变自动播放的时间,这里获取不到json数据了，怎么获取每页的控制参数
    //获取当前页的自动播放时间
    if (!renderjs) {
        return;
    }
    //1、获取当前页序号信息
    var pos = renderjs.helper.getPos();
    var pageAnimation = (animationMode.pageMode)[pos.x][pos.y];
    if (pageAnimation) {
        try {
            pageAnimation = JSON.parse(pageAnimation);
            _animationMode.interval = pageAnimation.interval;
        } catch (message) {
            console.log(message);
        }
    }
    magazinePlaying = true;
    playMagazineHandle();
    $("#switch-play")[0].className = "switch-play pause-magazine";
}
function playMagazineHandle() {
    playTimer = setTimeout(function () {
        //todo 先获取每页的自动播放时间，没有的话就是默认
        if (!renderjs) {
            return;
        }
        //1、获取当前页序号信息
        var pos = renderjs.helper.getPos();
        var pageAnimation = (animationMode.pageMode)[pos.x][pos.y];
        if (pageAnimation) {
            try {
                pageAnimation = JSON.parse(pageAnimation);
                _animationMode.interval = pageAnimation.interval;
            } catch (message) {
                console.log(message);
                _animationMode.interval = defaultInterval;
            }
        } else {
            _animationMode.interval = defaultInterval;
        }
        if (magazinePlaying) {
            if (renderjs) {
                renderjs.helper.gotoNext();
            }
        }
        playMagazineHandle();
    }, _animationMode.interval);
}
function pauseMagazine() {
    magazinePlaying = false;
    $("#switch-play")[0].className = "switch-play play-magazine";
    if (playTimer) {
        window.clearTimeout(playTimer);
    }
}
function showDirectory() {
    renderjs.helper.showDirectory();
}
function globalLoadTid(tid, cb) {
    var magUrl = "http://192.168.6.224/jsx?tid=" + tid + "&fmawr=" + fmawr;
    setTimeout(function () {
        require([magUrl], function (mag) {
            cb(mag);
        });
    }, 0);
}

function globalOpenWithInnerBrowse(target, height) {
    var myIframe = document.createElement("iframe");
    var $popupIframe = $("#popup-iframe");
    var $closeBtn = $(".closeBtn");
    $popupIframe.append($(myIframe));
    $popupIframe.show();
    myIframe.src = target;
    if (!height) height = "100%";
    myIframe.height = height;
    myIframe.width = "100%";
    myIframe.className = "iframeWrapper";
    $closeBtn.on("click", function () {
        $popupIframe.hide();
        $(myIframe).remove();
    });
}
var CustomerData = fmacloud.Object.extend("me_customerdata");
/**
 * 这里调用外部的保存数据
 * @param data  保存的数据
 * @param type  保存的数据类型，有表单数据，和投票数据1---表单数据， 2-----投票数据
 */
function globalSubmitDataToCloud(data, type) {
    if (type == 1) {  //表单保存数据
        var customerData = new CustomerData();
        //暂时不需要考虑头像,只是设置一个默认头像
        customerData.set("cd_userhead", "http://ac-hf3jpeco.clouddn.com/XqjQmhDhDLz4rQzeKaQVyVW7OKqPU4CvQ7QKJlPm.jpg");
        for (var key in data) {
            customerData.set(key, data[key]);
        }
        customerData.save(null, {
            success: function (obj) {
                //消息提示框
                renderjs.helper.showMessageBox("感谢您的参与", "确定");
                console.log(obj);
            },
            error: function (obj, error) {
                console.log('Failed to create new object, with error code: ' + error.message);
            }
        });
    } else { //投票保存
        if (!data) {
            return
        }
        var query = new fmacloud.Query("page");
        query.equalTo("objectId", data);
        query.descending("createdAt");
        query.first({
            success: function (pageobj) {
                var page_vote = pageobj.get("page_vote") || 0;
                pageobj.set("page_vote", page_vote + 1);
                pageobj.save(null, {
                    success: function (obj) {
                        //TODO 需要去更新静态文件，数据库里面的数据已经更新，但是静态文件数据还是初始状态
                        console.log(obj)
                    },
                    error: function (err) {
                        console.log(err)
                    }
                });
            }, error: function (err) {
                console.log(err)
            }
        });
    }
}

</script>
</html>